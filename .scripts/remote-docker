#!/bin/zsh

if [ -z "$1" ]; then
        export DOCKER_HOST=unix:///var/run/docker.sock
        export POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(context dir vcs)
	unset http_proxy
else
	NODE=${2:-1}

	case $1:u in
	DMZ)
	        export DOCKER_HOST=tcp://swarm$NODE.dmz.home.lecat.network:2375
        	export DOCKER_ENV=dmz
		;;
	SEC)
        	export DOCKER_HOST=tcp://swarm$NODE.secure.home.lecat.network:2375
	        export DOCKER_ENV=sec
		export http_proxy=http://adm.secure.home.lecat.network:3128
		;;
	ZBX-DMZ)
                export DOCKER_HOST=tcp://zabbix-proxy.dmz.home.lecat.network:2375
                export DOCKER_ENV=zbx-dmz
		export http_proxy=http://adm.secure.home.lecat.network:3128
		;;
	STORAGE)
		export DOCKER_HOST=tcp://storage.secure.home.lecat.network:2375
		export DOCKER_ENV=storage
		export http_proxy=http://adm.secure.home.lecat.network:3128
		;;
	esac

	export POWERLEVEL9K_CUSTOM_SWARM="echo üê≥ $DOCKER_ENV:u"
        export POWERLEVEL9K_LEFT_PROMPT_ELEMENTS=(custom_swarm dir vcs)
fi
